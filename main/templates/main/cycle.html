
{% extends  'base.html' %}
{% load static %}
{% block body_block %}
<style>
  body{
    height: 100vh;
    background: rgb(131,58,180);
    background: linear-gradient(318deg, rgba(131,58,180,1) 0%, rgba(253,29,29,1) 50%, rgba(252,176,69,1) 100%);
  }
  #main_content{
    margin-top: 2vh;
    border: 0.7px solid #BF360C;
    border-radius: 15px;
    width: auto;
    background-color: #FFFFFF;
    padding: 10px;
    box-shadow: -1px 3px 17px -1px rgba(22,22,2,0.58);
    -webkit-box-shadow: -1px 3px 17px -1px rgba(22,22,2,0.58);
    -moz-box-shadow: -1px 3px 17px -1px rgba(22,22,2,0.58);
  }
  .title{
    background-color: #B71C1C;
    color: white;
    font-family: 'Merienda';
  }
  input{
    margin-right: 10px;
  }
.btn-link{
    text-decoration: none !important;
  }
  .fas{
    padding-top: 10%;
    margin: 2%;
  }
  #title{
    font-size: 1.5rem;
  }
  .objs{
    border: 3px solid black;
    padding: 0.7%;
  }
</style>
<div class = "container-fluid" id = "main_content">

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item active">
        <a class="nav-link" href="#">Learning Outcomes <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{%url 'main:upload'%}">Upload data</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{%url 'main:rubric'%}">Create a rubric</a>
      </li>
    </ul>
  </div>
</nav>

  <div class = "row">
    <div class = "col col-lg-6 objs ">
    <div class = "d-flex justify-content-between">
    <span id ="title">  Learning outcomes </span>

<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
 <i class="fas fa-plus"></i>
</button>
</div>

  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Learning Outcome Details</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form action = "{%url 'main:add_learning_outcome' cycle_id%}" method="POST">
            {%csrf_token%}
            <input type="hidden" id="url" name = "url" value={{request.path}}>
            <div class="form-group">
              <label for="exampleFormControlTextarea1">Title</label>
              <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name = "outcome_title"></textarea>
            </div>
  <hr/>

            <div class="modal-footer">
              <button type="submit" class="btn btn-primary">Save changes</button>
            </div>
          </form>
        </div>

    </div>
  </div>

  </div>

<div class="panel-group" id="accordion">
  {%for outcome in outcomes%}


  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <div class = "d-flex justify-content-between">
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">{{outcome.title}}</a>

        <button type="button" class="btn btn-primary text-right" data-toggle="modal" data-target="#exampleModalCenterNewMeasure{{outcome.id}}" data-measure-id = "{{measure.id}}">
          <i class="fas fa-plus"></i>
        </button>
        </div>
        <div class="modal fade" id="exampleModalCenterNewMeasure{{outcome.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Edit Measure</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form action = "{%url 'main:new_measure' outcome.id%}" method="POST">

                  {%csrf_token%}
                  <input type="hidden" id="url" name = "url" value={{request.path}}>
                  <div class="form-group">
                    <label for="exampleFormControlTextarea1">Measure Title</label>
                    <input type="text" class="form-control" id="exampleInputPassword1"
                           placeholder="Measure title" name = "measure_title">
                  </div>
                <hr/>
                <div class="form-group">
                  <label for="exampleFormControlTextarea1">Measure Description</label>
                  <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                            name = "measure_desc"></textarea>
                </div>

                <div class="form-group">
                  <label for="exampleFormControlTextarea1">Cutoff-Score</label>
                  <input type="number" class="form-control" id="exampleInputPassword1"
                         placeholder="cutoff score" name = "cutoff_score">
                </div>

                <div class="form-group">
                  <label for="exampleFormControlTextarea1">Cutoff-percent</label>
                  <input type="number" class="form-control" id="exampleInputPassword1"
                         placeholder="cutoff percentage" name = "cutoff_percent">
                </div>

                  <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Add</button>
                  </div>
                </form>
              </div>

            </div>
          </div>
        </div>



      </h4>
    </div>
    <div id="collapse1" class="panel-collapse collapse in">
      {%for measure in measures %}
        {%if measure.outcome == outcome %}
      <div class="panel-body">
        <p>{{measure.measureTitle}}</p>
        <p>{{measure.measureText}}</p>
        {%if measure.rubric%}
          Tools associated: {{measure.rubric.title}}
          <button>Add students</button>
          <button>Assign evaluators</button>
          <br />
        {%endif%}


      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter{{measure.id}}" data-measure-id = "{{measure.id}}">
        Edit
      </button>

      <div class="modal fade" id="exampleModalCenter{{measure.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Edit Measure</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form action="{%url 'main:update_measure' measure.id%}" method="POST">
                {%csrf_token%}
                <input type="hidden" id="url" name = "url" value={{request.path}}>
                <div class="form-group">
                  <label for="exampleFormControlTextarea1">Measure Title</label>
                  <input type="text" class="form-control" id="exampleInputPassword1"
                         placeholder="Measure title" name = "measure_title"
                         value = "{{measure.measureTitle}}">
                </div>
              <hr/>
              <div class="form-group">
                <label for="exampleFormControlTextarea1">Measure Description</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                          name = "measure_desc">{{measure.measureText}}</textarea>
              </div>

              <div class="form-group">
                <label for="exampleFormControlTextarea1">Cutoff-Score</label>
                <input type="number" class="form-control" id="exampleInputPassword1"
                       placeholder="cutoff score" name = "cutoff_score"
                       value = "{{measure.cutoff_score}}">
              </div>

              <div class="form-group">
                <label for="exampleFormControlTextarea1">Cutoff-percent</label>
                <input type="number" class="form-control" id="exampleInputPassword1"
                       placeholder="Measure title" name = "cutoff_percent"
                       value = "{{measure.cutoff_percentage}}">
              </div>



                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
              </form>
            </div>

          </div>
        </div>
      </div>

      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenterAddRubric{{measure.id}}">
        Add Rubric
      </button>

      <div class="modal fade" id="exampleModalCenterAddRubric{{measure.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Select rubrics for the measure</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form action = "{%url 'main:add_rubric_to_measure' measure.id %}" method="POST">
                {%csrf_token%}
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Select from a previous rubric</label>
                  <select class="form-control" id="exampleFormControlSelect1" name ="select_rubric">
                      {%for rubric in rubrics%}
                        <option>{{rubric.title}}</option>
                      {%endfor%}
                  </select>
                </div>


                <div class="modal-footer">
                  <a href = "{%url 'main:new_rubric'%}"> create a new one </a>
                  <button type="submit" class="btn btn-primary">Add Rubric</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>



      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenterAddTestScore" data-measure-id = "{{measure.id}}">
        Add Test
      </button>

      <div class="modal fade" id="exampleModalCenterAddTestScore" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Add test for the measure</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form action = "{%url 'main:add_test_to_measure' measure.id%}" method="POST">
                {%csrf_token%}
                <div class="form-group">
                  <label for="exampleFormControlSelect1">Add test</label>
                  <input type="text" class="form-control" id="exampleInputPassword1"
                         placeholder="Test name" name = "test_name">
                </div>

                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary">Add Test</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
         <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalDelete{{measure.id}}" data-measure-id = "{{measure.id}}">
        Delete
         </button>
        <div class="modal fade" id="exampleModalDelete{{measure.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Delete</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form action = "{%url 'main:delete_measure' measure.id%}" method="POST">
                {%csrf_token%}
                <input type="hidden" id="url" name = "url" value={{request.path}}>
                Are you sure? <br/>
                  <button type="submit" class="btn btn-primary">Delete</button>
                </div>
            </div>
          </div>
        </div>
    <hr />

      </div>
      {%endif%}

    {%endfor%}


    </div>
  </div>
  {%endfor%}


</div>



</div>

</div>
<!-- <div class = "col col-lg-6">

  <ul class="list-group">
  <li class="list-group-item active ">Evaluators</li>
  {%for evaluator in evaluators %}
    <li class="list-group-item">{{evaluator.name}}</li>
  {%endfor%}

  <li class="list-group-item">
    <form class="form-inline" method="POST" action ="{%url 'main:add_evaluator'%}">
      {% csrf_token %}
      <div class="form-group mb-2 mr-3">
        <input type="text" name = "evaluator_name" class="form-control"  placeholder="name">
        <input type="email" name = "evaluator_email" class="form-control" placeholder="email">
      </div>
      <button type="submit" class="btn btn-primary btn-block mb-2">Invite</button>
  </form>

  </li>
</ul>
</div> -->



{%endblock%}
